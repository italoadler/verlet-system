!function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e){var n={create:t("gl-vec2/create"),add:t("gl-vec2/add"),multiply:t("gl-vec2/multiply"),sub:t("gl-vec2/subtract"),scale:t("gl-vec2/scale"),copy:t("gl-vec2/copy"),sqrLen:t("gl-vec2/squaredLength"),fromValues:t("gl-vec2/fromValues")};e.exports=t("./lib/build")(n)},{"./lib/build":4,"gl-vec2/add":17,"gl-vec2/copy":18,"gl-vec2/create":19,"gl-vec2/fromValues":22,"gl-vec2/multiply":23,"gl-vec2/scale":24,"gl-vec2/squaredLength":25,"gl-vec2/subtract":26}],2:[function(t){function e(t,e,i,o){t.clearRect(0,0,e,i),t.fillStyle="#1f1f1f",t.fillRect(0,0,e,i),n(e,i,o),t.beginPath(),c.forEach(function(e){if(e.rect){var n=e.position;t.moveTo(n[0],n[1]);var i=2;t.rect(n[0]-i/2,n[1]-i/2,i,i)}}),t.fillStyle="rgba(255,255,255,0.5)",t.fill(),t.strokeStyle="rgba(255,255,255,0.25)",u.forEach(function(e){t.beginPath(),e.points.forEach(function(e){t.lineTo(e.position[0],e.position[1])}),t.stroke()})}function n(t,e,n){a.min=[0,0],a.max=[t,e],a.integrate(c,n/1e3),u.forEach(function(t){return t.solve()})}function i(t,e,n){a=h(),c=o(500,e,n),u=r(c),setTimeout(function(){s(c,1)},1500),setTimeout(function(){a.gravity[1]=500},2500)}function o(t,e,n){return l(t).map(function(t,i,o){var r=d(10,15),s=i/(o.length-1),a=s*Math.PI*4,c=[Math.cos(a)*r,Math.sin(a)*r],u=v({position:f.add([],c,[e/2,n/2])});return u.addForce(f.scale([],c,.2*s)),i%2===0&&(u.mass=2),u.rect=!0,u})}function r(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[(n+1)%t.length]]);return e.map(function(t){return p(t,{restingDistance:10,stiffness:.05})})}function s(t,e){var n=0;t.forEach(function(t,i,o){setTimeout(function(){var e=50,n=i/(o.length-1),r=n*Math.PI*40+d(20,30),s=[Math.cos(r)*e,Math.sin(r)*e];t.addForce(f.scale(s,s,-.5*n)),t.rect=!1},n),n+=e||0})}t("canvas-testbed")(e,i);var a,c,u,h=t("../"),f={scale:t("gl-vec2/scale"),add:t("gl-vec2/add")},l=t("array-range"),d=t("randf"),p=t("verlet-constraint"),v=t("verlet-point")},{"../":1,"array-range":5,"canvas-testbed":7,"gl-vec2/add":17,"gl-vec2/scale":24,randf:27,"verlet-constraint":28,"verlet-point":30}],3:[function(t,e){e.exports=function(t){var e=t.fromValues(-1/0,-1/0,-1/0),n=t.fromValues(1/0,1/0,1/0),i=t.fromValues(1,1,1),o=t.create(),r=1e-6;return function(s,a,c,u,h){if(c||u){t.copy(o,i),c=c||e,u=u||n;var f=0,l=s.position.length,d=!1,p=s.radius||0;for(f=0;l>f;f++)"number"==typeof c[f]&&s.position[f]-p<c[f]&&(o[f]=-1,s.position[f]=c[f]+p,d=!0);for(f=0;l>f;f++)"number"==typeof u[f]&&s.position[f]+p>u[f]&&(o[f]=-1,s.position[f]=u[f]-p,d=!0);var v=t.sqrLen(a);if(d&&!(r>=v)){var m=Math.sqrt(v);0!==m&&t.scale(a,a,1/m),t.scale(o,o,m*h),t.multiply(a,a,o)}}}}},{}],4:[function(t,e){var n=t("as-number"),i=(t("clamp"),t("./box-collision"));e.exports=function(t){function e(i){return this instanceof e?(i=i||{},this.gravity=i.gravity||t.create(),this.friction=n(i.friction,.98),this.min=i.min,this.max=i.max,void(this.bounce=n(i.bounce,1))):new e(i)}var o=i(t),r=t.create(),s=t.create(),a=t.create();return e.prototype.collision=function(t,e){o(t,e,this.min,this.max,this.bounce)},e.prototype.integratePoint=function(e,n){var i="number"==typeof e.mass?e.mass:1;if(0===i)return this.collision(e,a),void t.copy(e.acceleration,a);t.add(e.acceleration,e.acceleration,this.gravity),t.scale(e.acceleration,e.acceleration,i),t.sub(r,e.position,e.previous),t.scale(r,r,this.friction),this.collision(e,r),t.copy(e.previous,e.position);var o=n*n;t.scale(s,e.acceleration,.5*o),t.add(e.position,e.position,r),t.add(e.position,e.position,s),t.copy(e.acceleration,a)},e.prototype.integrate=function(t,e){for(var n=0;n<t.length;n++)this.integratePoint(t[n],e)},e}},{"./box-collision":3,"as-number":6,clamp:16}],5:[function(t,e){e.exports=function(t,e){var n="number"==typeof t,i="number"==typeof e;n&&!i?(e=t,t=0):n||i||(t=0,e=0),t=0|t,e=0|e;var o=e-t;if(0>o)throw new Error("array length must be positive");for(var r=new Array(o),s=0,a=t;o>s;s++,a++)r[s]=a;return r}},{}],6:[function(t,e){e.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},{}],7:[function(t,e){var n=t("domready");t("raf.js");var i=t("canvas-app");e.exports=function(t,e,o){n(function(){"object"==typeof t&&t?(o=t,t=null,e=null):"object"==typeof e&&e&&(o=e,e=null),o=o||{},"function"!=typeof o.onReady&&(o.onReady=e);var n=i(t,o);n.canvas.setAttribute("id","canvas"),document.body.appendChild(n.canvas),document.body.style.margin="0",document.body.style.overflow="hidden",n.start()})}},{"canvas-app":8,domready:14,"raf.js":15}],8:[function(t,e){function n(t){var e="undefined"!=typeof CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D;return t&&(e||o(t))}function i(t,e){if(!(this instanceof i))return new i(t,e);"object"==typeof t&&t&&(e=t,t=null),t="function"==typeof t?t:e.onRender,e=e||{},e.retina="boolean"==typeof e.retina?e.retina:!0;var c="number"==typeof e.width,u="number"==typeof e.height;(c||u)&&(e.ignoreResize=!0),e.width=c?e.width:window.innerWidth,e.height=u?e.height:window.innerHeight;var h,f,l=e.retina?window.devicePixelRatio||1:1,d=e.contextAttributes||{};if(this.isWebGL=!1,n(e.context)&&(f=e.context,h=f.canvas),h||(h=e.canvas||document.createElement("canvas")),h.width=e.width*l,h.height=e.height*l,!f)if("webgl"===e.context||"experimental-webgl"===e.context){if(f=r({canvas:h,attributes:d}),!f)throw"WebGL Context Not Supported -- try enabling it or using a different browser"}else f=h.getContext(e.context||"2d",d);this.isWebGL=o(f),e.retina&&(h.style.width=e.width+"px",h.style.height=e.height+"px"),this.running=!1,this.width=e.width,this.height=e.height,this.canvas=h,this.context=f,this.onResize=e.onResize,this._DPR=l,this._retina=e.retina,this._once=e.once,this._ignoreResize=e.ignoreResize,this._lastFrame=null,this._then=Date.now(),this.maxDeltaTime="number"==typeof e.maxDeltaTime?e.maxDeltaTime:1e3/24,this.fps=60,this._frames=0,this._prevTime=this._then,this._ignoreResize||(e.resizeDebounce="number"==typeof e.resizeDebounce?e.resizeDebounce:50,a(window,"resize",s(function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this),e.resizeDebounce,!1)),a(window,"orientationchange",function(){this.resize(window.innerWidth,window.innerHeight)}.bind(this))),this.onRender="function"==typeof t?t.bind(this):function(){},this.renderOnce=function(){var t=Date.now(),e=Math.min(this.maxDeltaTime,t-this._then);this._frames++,t>this._prevTime+1e3&&(this.fps=Math.round(1e3*this._frames/(t-this._prevTime)),this._prevTime=t,this._frames=0),this.isWebGL?this.context.viewport(0,0,this.width*this._DPR,this.height*this._DPR):(this.context.save(),this.context.scale(this._DPR,this._DPR)),this.onRender(this.context,this.width,this.height,e),this.isWebGL||this.context.restore(),this._then=t},this._renderHandler=function(){this.running&&(this._once||(this._lastFrame=requestAnimationFrame(this._renderHandler)),this.renderOnce())}.bind(this),"function"==typeof e.onReady&&e.onReady.call(this,f,this.width,this.height)}var o=t("is-webgl-context"),r=t("webgl-context"),s=t("debounce"),a=t("add-event-listener");Object.defineProperty(i.prototype,"retinaEnabled",{set:function(t){this._retina=t,this._DPR=this._retina?window.devicePixelRatio||1:1,this.resize(this.width,this.height)},get:function(){return this._retina}}),Object.defineProperty(i.prototype,"deviceWidth",{get:function(){return this.width*this._DPR}}),Object.defineProperty(i.prototype,"deviceHeight",{get:function(){return this.height*this._DPR}}),i.prototype.resetFPS=function(){this._frames=0,this._prevTime=Date.now(),this._then=this._prevTime,this.fps=60},i.prototype.start=function(){this.running||(this._lastFrame&&cancelAnimationFrame(this._lastFrame),this.resetFPS(),this.running=!0,this._lastFrame=requestAnimationFrame(this._renderHandler))},i.prototype.stop=function(){this._lastFrame&&(cancelAnimationFrame(this._lastFrame),this._lastFrame=null),this.running=!1},i.prototype.resize=function(t,e){var n=this.canvas;this.width=t,this.height=e,n.width=this.width*this._DPR,n.height=this.height*this._DPR,this._retina&&(n.style.width=this.width+"px",n.style.height=this.height+"px"),this._once&&requestAnimationFrame(this._renderHandler),"function"==typeof this.onResize&&this.onResize(this.width,this.height)},e.exports=i},{"add-event-listener":9,debounce:10,"is-webgl-context":12,"webgl-context":13}],9:[function(t,e){function n(t,e,n,i){return c=c||(document.addEventListener?{add:o,rm:r}:{add:s,rm:a}),c.add(t,e,n,i)}function i(t,e,n,i){return c=c||(document.addEventListener?{add:o,rm:r}:{add:s,rm:a}),c.rm(t,e,n,i)}function o(t,e,n,i){t.addEventListener(e,n,i)}function r(t,e,n,i){t.removeEventListener(e,n,i)}function s(t,e,n,i){if(i)throw new Error("cannot useCapture in oldIE");t.attachEvent("on"+e,n)}function a(t,e,n){t.detachEvent("on"+e,n)}n.removeEventListener=i,n.addEventListener=n,e.exports=n;var c=null},{}],10:[function(t,e){var n=t("date-now");e.exports=function(t,e,i){function o(){var h=n()-c;e>h&&h>0?r=setTimeout(o,e-h):(r=null,i||(u=t.apply(a,s),r||(a=s=null)))}var r,s,a,c,u;return null==e&&(e=100),function(){a=this,s=arguments,c=n();var h=i&&!r;return r||(r=setTimeout(o,e)),h&&(u=t.apply(a,s),a=s=null),u}}},{"date-now":11}],11:[function(t,e){function n(){return(new Date).getTime()}e.exports=Date.now||n},{}],12:[function(t,e){e.exports=function(t){if(!t)return!1;var e=t;return"undefined"!=typeof t.rawgl&&(e=t.rawgl),"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext?!0:!1}},{}],13:[function(t,e){e.exports=function(t){t=t||{};var e=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(e.width=t.width),"number"==typeof t.height&&(e.height=t.height);var n=t.attributes||t.attribs||{};try{gl=e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}catch(i){gl=null}return gl}},{}],14:[function(t,e){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(){var t,e=[],n=document,i=n.documentElement.doScroll,o="DOMContentLoaded",r=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return r||n.addEventListener(o,t=function(){for(n.removeEventListener(o,t),r=1;t=e.shift();)t()}),function(t){r?t():e.push(t)}})},{}],15:[function(){!function(t){for(var e=0,n=["webkit","moz"],i=t.requestAnimationFrame,o=t.cancelAnimationFrame,r=n.length;--r>=0&&!i;)i=t[n[r]+"RequestAnimationFrame"],o=t[n[r]+"CancelAnimationFrame"];i&&o||(i=function(t){var n=+new Date,i=Math.max(e+16,n);return setTimeout(function(){t(e=i)},i-n)},o=clearTimeout),t.requestAnimationFrame=i,t.cancelAnimationFrame=o}(window)},{}],16:[function(t,e){function n(t,e,n){return n>e?e>t?e:t>n?n:t:n>t?n:t>e?e:t}e.exports=n},{}],17:[function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}e.exports=n},{}],18:[function(t,e){function n(t,e){return t[0]=e[0],t[1]=e[1],t}e.exports=n},{}],19:[function(t,e){function n(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}e.exports=n},{}],20:[function(t,e){function n(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}e.exports=n},{}],21:[function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1]}e.exports=n},{}],22:[function(t,e){function n(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}e.exports=n},{}],23:[function(t,e){function n(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}e.exports=n},{}],24:[function(t,e){function n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}e.exports=n},{}],25:[function(t,e){function n(t){var e=t[0],n=t[1];return e*e+n*n}e.exports=n},{}],26:[function(t,e){function n(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}e.exports=n},{}],27:[function(t,e){function n(t,e){var n="number"==typeof t,i="number"==typeof e;return n&&!i?(e=t,t=0):n||i||(t=0,e=1),t+Math.random()*(e-t)}e.exports=n},{}],28:[function(t,e){var n={create:t("gl-vec2/create"),add:t("gl-vec2/add"),dot:t("gl-vec2/dot"),sub:t("gl-vec2/subtract"),scale:t("gl-vec2/scale"),distance:t("gl-vec2/distance")};e.exports=t("./lib/build")(n)},{"./lib/build":29,"gl-vec2/add":17,"gl-vec2/create":19,"gl-vec2/distance":20,"gl-vec2/dot":21,"gl-vec2/scale":24,"gl-vec2/subtract":26}],29:[function(t,e){e.exports=function(t){function e(e,n){if(!e||2!==e.length)throw new Error("two points must be specified for the constraint");if(!e[0].position||!e[1].position)throw new Error("must specify verlet-point or similar, with { position }");this.points=e,this.stiffness=1,n&&"number"==typeof n.stiffness&&(this.stiffness=n.stiffness),this.restingDistance=n&&"number"==typeof n.restingDistance?n.restingDistance:t.distance(this.points[0].position,this.points[1].position)}var n=t.create(),i=t.create();return e.prototype.solve=function(){var e=this.points[0],o=this.points[1],r=e.position,s=o.position,a="number"==typeof e.mass?e.mass:1,c="number"==typeof o.mass?o.mass:1;t.sub(n,r,s);var u,h,f=Math.sqrt(t.dot(n,n)),l=0===f?this.restingDistance:(this.restingDistance-f)/f;if(0===a||0===c)u=this.stiffness,h=this.stiffness;else{var d=1/a,p=1/c;u=d/(d+p)*this.stiffness,h=this.stiffness-u}return t.scale(i,n,u*l),t.add(r,r,i),t.scale(i,n,h*l),t.sub(s,s,i),f},function(t,n,i){return new e(t,n,i)}}},{}],30:[function(t,e){var n={create:t("gl-vec2/create"),sub:t("gl-vec2/subtract"),copy:t("gl-vec2/copy")};e.exports=t("./lib/build")(n)},{"./lib/build":31,"gl-vec2/copy":18,"gl-vec2/create":19,"gl-vec2/subtract":26}],31:[function(t,e){e.exports=function(t){function e(e){this.position=t.create(),this.previous=t.create(),this.acceleration=t.create(),this.mass=1,this.radius=0,e&&"number"==typeof e.mass&&(this.mass=e.mass),e&&"number"==typeof e.radius&&(this.radius=e.radius),e&&e.position&&t.copy(this.position,e.position),e&&(e.previous||e.position)&&t.copy(this.previous,e.previous||e.position),e&&e.acceleration&&t.copy(this.acceleration,e.acceleration)}return e.prototype.addForce=function(e){return t.sub(this.previous,this.previous,e),this},e.prototype.place=function(e){return t.copy(this.position,e),t.copy(this.previous,e),this},function(t){return new e(t)}}},{}]},{},[2]);